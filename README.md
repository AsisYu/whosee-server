# ğŸŒ Whosee-WHOIS åŸŸåä¿¡æ¯æŸ¥è¯¢æœåŠ¡

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

Whosee-WHOISæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åŸŸåWHOISä¿¡æ¯æŸ¥è¯¢æœåŠ¡ï¼Œæä¾›å¿«é€Ÿã€å¯é çš„åŸŸåæ³¨å†Œä¿¡æ¯æŸ¥è¯¢åŠŸèƒ½ã€‚è¯¥æœåŠ¡é›†æˆäº†å¤šä¸ªWHOISæ•°æ®æä¾›å•†APIï¼Œå®ç°äº†è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»å’Œæ™ºèƒ½ç¼“å­˜ï¼Œç¡®ä¿æŸ¥è¯¢æœåŠ¡çš„é«˜å¯ç”¨æ€§å’Œå“åº”é€Ÿåº¦ã€‚

å‰ç«¯é¡¹ç›®ä»“åº“ï¼š[https://github.com/AsisYu/whosee-whois](https://github.com/AsisYu/whosee-whois)

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ”„ **å¤šæä¾›å•†æ”¯æŒ**ï¼šé›†æˆWhoisXMLå’ŒWhoisFreaksç­‰å¤šä¸ªWHOISæ•°æ®æä¾›å•†ï¼Œæé«˜æ•°æ®å‡†ç¡®æ€§å’ŒæœåŠ¡å¯ç”¨æ€§
  > é€šè¿‡Provideræ¥å£æŠ½è±¡ä¸åŒçš„WHOISæ•°æ®æä¾›å•†ï¼Œå®ç°ç»Ÿä¸€è°ƒç”¨æ–¹å¼ã€‚ç³»ç»Ÿå¯æ ¹æ®æŸ¥è¯¢éœ€æ±‚å’Œæä¾›å•†çŠ¶æ€æ™ºèƒ½åˆ‡æ¢æ•°æ®æºï¼Œç¡®ä¿è·å–æœ€å‡†ç¡®ã€æœ€æ–°çš„åŸŸåä¿¡æ¯ã€‚

- âš¡ **æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ**ï¼šåŸºäºRedisçš„ç¼“å­˜ç³»ç»Ÿï¼Œæ ¹æ®åŸŸååˆ°æœŸæ—¶é—´åŠ¨æ€è°ƒæ•´ç¼“å­˜æ—¶é•¿
  > é‡‡ç”¨å¤šçº§ç¼“å­˜ç­–ç•¥ï¼Œå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ™ºèƒ½å­˜å‚¨ã€‚ç³»ç»Ÿä¼šæ ¹æ®åŸŸååˆ°æœŸæ—¶é—´è‡ªåŠ¨è®¡ç®—æœ€ä¼˜ç¼“å­˜å‘¨æœŸï¼Œä¸´è¿‘è¿‡æœŸçš„åŸŸåç¼“å­˜æ—¶é—´è¾ƒçŸ­ï¼Œè€Œé•¿æœŸæœ‰æ•ˆçš„åŸŸååˆ™æœ‰æ›´é•¿çš„ç¼“å­˜æœŸï¼Œæœ‰æ•ˆå‡å°‘APIè°ƒç”¨æ¬¡æ•°å’ŒæŸ¥è¯¢æˆæœ¬ã€‚

- âš–ï¸ **è´Ÿè½½å‡è¡¡**ï¼šæ™ºèƒ½é€‰æ‹©æœ€ä½³WHOISæ•°æ®æä¾›å•†ï¼Œå¹³è¡¡APIè°ƒç”¨æ¬¡æ•°
  > å®ç°åŸºäºæƒé‡å’Œå¯ç”¨æ€§çš„åŠ¨æ€è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œç³»ç»Ÿä¼šè¿½è¸ªæ¯ä¸ªæä¾›å•†çš„å“åº”æ—¶é—´ã€æˆåŠŸç‡å’Œå‰©ä½™APIé…é¢ï¼Œè‡ªåŠ¨å°†æŸ¥è¯¢è¯·æ±‚åˆ†é…ç»™æœ€ä¼˜çš„æä¾›å•†ï¼Œç¡®ä¿èµ„æºåˆ©ç”¨æœ€å¤§åŒ–ã€‚

- ğŸ”„ **æ•…éšœè½¬ç§»**ï¼šè‡ªåŠ¨æ£€æµ‹APIæ•…éšœå¹¶åˆ‡æ¢åˆ°å¤‡ç”¨æä¾›å•†
  > å†…ç½®å¥åº·æ£€æŸ¥æœºåˆ¶ï¼Œå®æ—¶ç›‘æ§å„æä¾›å•†APIçš„å¯ç”¨æ€§ã€‚å½“æ£€æµ‹åˆ°æŸä¸ªæä¾›å•†æœåŠ¡å¼‚å¸¸æˆ–è¶…æ—¶ï¼Œç³»ç»Ÿä¼šç«‹å³åˆ‡æ¢åˆ°å¤‡ç”¨æä¾›å•†ï¼Œç¡®ä¿æœåŠ¡çš„è¿ç»­æ€§å’Œå¯é æ€§ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥åˆ‡æ¢ã€‚

- ğŸ“Š **ç»Ÿä¸€æ•°æ®æ ¼å¼**ï¼šå°†ä¸åŒæä¾›å•†çš„æ•°æ®æ ¼å¼ç»Ÿä¸€ï¼Œæä¾›ä¸€è‡´çš„APIå“åº”
  > é€šè¿‡æ•°æ®è½¬æ¢å±‚å¤„ç†å„æä¾›å•†è¿”å›çš„ä¸åŒæ ¼å¼æ•°æ®ï¼Œæå–å…³é”®ä¿¡æ¯å¹¶æ˜ å°„åˆ°æ ‡å‡†åŒ–çš„å“åº”æ¨¡å‹ã€‚æ— è®ºåº•å±‚ä½¿ç”¨å“ªä¸ªæä¾›å•†ï¼Œå®¢æˆ·ç«¯å§‹ç»ˆè·å¾—ç»“æ„ä¸€è‡´ã€å­—æ®µç»Ÿä¸€çš„æŸ¥è¯¢ç»“æœã€‚

- ğŸ› ï¸ **å®Œå–„çš„é”™è¯¯å¤„ç†**ï¼šè¯¦ç»†çš„é”™è¯¯åˆ†ç±»å’Œå¤„ç†æœºåˆ¶
  > å®ç°åˆ†å±‚çš„é”™è¯¯å¤„ç†ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç½‘ç»œé”™è¯¯ã€APIé™åˆ¶é”™è¯¯ã€è®¤è¯é”™è¯¯ç­‰å¤šç§ç±»å‹ã€‚æ¯ç§é”™è¯¯éƒ½æœ‰æ˜ç¡®çš„é”™è¯¯ç å’Œæè¿°ä¿¡æ¯ï¼Œä¾¿äºå®¢æˆ·ç«¯è¯†åˆ«é—®é¢˜å¹¶é‡‡å–ç›¸åº”æªæ–½ï¼ŒåŒæ—¶ç³»ç»Ÿä¼šè®°å½•è¯¦ç»†æ—¥å¿—ç”¨äºé—®é¢˜æ’æŸ¥ã€‚

- ğŸ“¸ **å¢å¼ºçš„æˆªå›¾åŠŸèƒ½**ï¼šæ™ºèƒ½ç½‘ç«™æˆªå›¾ä¸è¯¦ç»†é”™è¯¯åé¦ˆ
  > æä¾›é«˜çº§ç½‘ç«™æˆªå›¾åŠŸèƒ½ï¼Œæ”¯æŒæ™®é€šç½‘ç«™æˆªå›¾ã€ITDogæµ‹é€Ÿæˆªå›¾å’Œå…ƒç´ æˆªå›¾ã€‚å®ç°äº†å¼ºå¤§çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œèƒ½å¤Ÿè¯†åˆ«å¹¶æŠ¥å‘ŠDNSè§£æå¤±è´¥ï¼ˆ`net::ERR_NAME_NOT_RESOLVED`ï¼‰ã€è¿æ¥è¶…æ—¶ã€ç½‘ç«™æ‹’ç»è®¿é—®ç­‰å¤šç§é”™è¯¯æƒ…å†µï¼Œä¸ºç”¨æˆ·æä¾›æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œå¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚é‡‡ç”¨æ”¹è¿›çš„chromedpå®ç°ï¼Œé€šè¿‡`chromedp.Evaluate`æ›¿ä»£`WaitFunction`ï¼Œå®ç°æ›´ç¨³å®šçš„æµ‹é€Ÿæˆªå›¾åŠŸèƒ½ï¼Œå¹¶å¢åŠ äº†è¶…æ—¶ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢æ— é™ç­‰å¾…ã€‚å‰ç«¯ç»„ä»¶è‡ªåŠ¨åœ¨åŸŸåå˜æ›´æ—¶æ¸…é™¤ä¸Šä¸€æ¬¡çš„æˆªå›¾ç»“æœï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒçš„ä¸€è‡´æ€§ã€‚

- ğŸš¦ **APIé€Ÿç‡é™åˆ¶**ï¼šé˜²æ­¢APIæ»¥ç”¨çš„è¯·æ±‚é™æµæœºåˆ¶
  > é‡‡ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°ç²¾ç¡®çš„è¯·æ±‚é™æµæ§åˆ¶ï¼Œå¯åŸºäºIPåœ°å€ã€ç”¨æˆ·IDæˆ–APIå¯†é’¥è¿›è¡Œé™æµã€‚ç³»ç»Ÿæ”¯æŒé…ç½®ä¸åŒç”¨æˆ·çº§åˆ«çš„è®¿é—®é¢‘ç‡ï¼Œå¹¶åœ¨è¯·æ±‚å¤´ä¸­è¿”å›é™æµç›¸å…³ä¿¡æ¯ï¼Œå¸®åŠ©å®¢æˆ·ç«¯äº†è§£å½“å‰é™åˆ¶çŠ¶æ€ã€‚

- ğŸ”’ **å®‰å…¨é˜²æŠ¤**ï¼šåŒ…å«CORSã€è¯·æ±‚éªŒè¯ç­‰å®‰å…¨æªæ–½
  > é›†æˆå¤šå±‚å®‰å…¨é˜²æŠ¤æœºåˆ¶ï¼ŒåŒ…æ‹¬è¯·æ±‚æ¥æºéªŒè¯ã€å‚æ•°å‡€åŒ–ã€CSRFé˜²æŠ¤å’ŒAPIå¯†é’¥è®¤è¯ã€‚æ‰€æœ‰APIç«¯ç‚¹éƒ½ç»è¿‡å®‰å…¨å®¡è®¡ï¼Œé˜²æ­¢å¸¸è§çš„Webæ”»å‡»ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å…è®¸çš„æ¥æºåŸŸï¼Œå¢å¼ºè·¨åŸŸè¯·æ±‚çš„å®‰å…¨æ€§ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ğŸ’» æ ¸å¿ƒç»„ä»¶

- ğŸš€ **Webæ¡†æ¶**ï¼šåŸºäºGinæ„å»ºçš„é«˜æ€§èƒ½WebæœåŠ¡
- ğŸ“¦ **ç¼“å­˜ç³»ç»Ÿ**ï¼šä½¿ç”¨Redisè¿›è¡Œæ•°æ®ç¼“å­˜
- ğŸ”Œ **æœåŠ¡ç®¡ç†**ï¼šWhoisManageræœåŠ¡ç®¡ç†å¤šä¸ªWHOISæä¾›å•†
- ğŸ”— **ä¸­é—´ä»¶**ï¼šè®¤è¯ã€æ—¥å¿—ã€é™æµã€é”™è¯¯å¤„ç†ç­‰ä¸­é—´ä»¶
- ğŸ–¥ï¸ **å‰ç«¯æŠ€æœ¯**ï¼šåŸºäºç°ä»£å‰ç«¯æ¡†æ¶æ„å»ºçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›ç›´è§‚çš„åŸŸåæŸ¥è¯¢ä½“éªŒ

### ğŸ“ ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ handlers/       # è¯·æ±‚å¤„ç†å™¨
â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶ç»„ä»¶
â”œâ”€â”€ providers/      # WHOISæ•°æ®æä¾›å•†å®ç°
â”œâ”€â”€ services/       # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ types/          # æ•°æ®ç±»å‹å®šä¹‰
â”œâ”€â”€ logs/           # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ .env            # ç¯å¢ƒå˜é‡é…ç½®
â””â”€â”€ main.go         # åº”ç”¨å…¥å£
```

å‰ç«¯é¡¹ç›®ä½äºç‹¬ç«‹çš„ä»“åº“ä¸­ï¼š[https://github.com/AsisYu/whosee-whois](https://github.com/AsisYu/whosee-whois)

## ğŸ“¥ å®‰è£…æŒ‡å—

### ğŸ”§ å‰ç½®æ¡ä»¶

- ğŸ”¹ Go 1.24+
- ğŸ”¹ Redis 6.0+
- ğŸ”¹ WHOIS APIè´¦å·ï¼ˆWhoisXMLå’Œ/æˆ–WhoisFreaksï¼‰
- ğŸ”¹ Chrome/Chromium (ç”¨äºç½‘ç«™æˆªå›¾åŠŸèƒ½)

### ğŸ“‹ å®‰è£…æ­¥éª¤

1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/AsisYu/whosee-whois.git
cd whosee-whois/server
```

2. å®‰è£…ä¾èµ–

```bash
go mod download
```

3. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥APIå¯†é’¥å’ŒRedisé…ç½®
```

4. è¿è¡ŒæœåŠ¡

```bash
go run main.go
```

### ğŸ–¥ï¸ å‰ç«¯é¡¹ç›®å®‰è£…

1. å…‹éš†å‰ç«¯ä»“åº“

```bash
git clone https://github.com/AsisYu/whosee-whois.git
cd whosee-whois
```

2. å®‰è£…ä¾èµ–

```bash
npm install
```

3. è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ğŸ³ ä½¿ç”¨Dockeréƒ¨ç½²

1. æ„å»ºDockeré•œåƒ

```bash
# åœ¨æœåŠ¡ç«¯ç›®å½•ä¸‹
docker build -t whosee-server .
```

2. è¿è¡Œå®¹å™¨

```bash
docker run -d -p 3900:3900 --name whosee-server \
  -e WHOISFREAKS_API_KEY=your_api_key \
  -e WHOISXML_API_KEY=your_api_key \
  -e JWT_SECRET=your_jwt_secret \
  -e API_KEY=your_api_key \
  --restart unless-stopped \
  whosee-server
```

### ğŸ“¦ ä½¿ç”¨PM2éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

1. å®‰è£…PM2

```bash
npm install -g pm2
```

2. ç¼–è¯‘Goåº”ç”¨

```bash
go build -o whosee-server main.go
```

3. åˆ›å»ºPM2é…ç½®æ–‡ä»¶ `ecosystem.config.js`

```javascript
module.exports = {
  apps: [{
    name: "whosee-server",
    script: "./whosee-server",
    env: {
      NODE_ENV: "production",
      PORT: 3900
    },
    log_date_format: "YYYY-MM-DD HH:mm:ss",
    out_file: "./logs/pm2_out.log",
    error_file: "./logs/pm2_error.log"
  }]
}
```

4. å¯åŠ¨æœåŠ¡

```bash
pm2 start ecosystem.config.js
```

5. è®¾ç½®å¼€æœºè‡ªå¯

```bash
pm2 startup
pm2 save
```

### ğŸŒ Nginxé…ç½®ï¼ˆåå‘ä»£ç†ï¼‰

```nginx
server {
    listen 80;
    server_name api.whosee.me;

    location / {
        proxy_pass http://localhost:3900;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### ğŸ“‹ ä¾èµ–ç®¡ç†

å¦‚éœ€æ›´æ–°ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬
go get -u ./...

# æ›´æ–°ç‰¹å®šä¾èµ–
go get -u github.com/gin-gonic/gin
go get -u github.com/go-redis/redis/v8
go get -u github.com/chromedp/chromedp

# æ•´ç†go.modæ–‡ä»¶
go mod tidy
```

### ğŸ”§ æˆªå›¾åŠŸèƒ½ä¾èµ–

æˆªå›¾åŠŸèƒ½ä¾èµ–äºChrome/Chromiumæµè§ˆå™¨ï¼Œåœ¨LinuxæœåŠ¡å™¨ä¸Šéœ€è¦å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

```bash
# Debian/Ubuntu
apt-get update
apt-get install -y wget gnupg
wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -
echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" > /etc/apt/sources.list.d/google.list
apt-get update
apt-get install -y google-chrome-stable

# CentOS/RHEL
yum install -y wget
wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
yum install -y google-chrome-stable_current_x86_64.rpm
```

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### ğŸ“¡ APIæ¥å£

#### æŸ¥è¯¢åŸŸåWHOISä¿¡æ¯

```bash
curl -X POST http://localhost:3900/api/whois \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"domain": "example.com"}'
```

#### å“åº”ç¤ºä¾‹

```json
{
  "available": false,
  "domain": "example.com",
  "registrar": "Example Registrar, LLC",
  "creationDate": "1995-08-14T04:00:00Z",
  "expiryDate": "2023-08-13T04:00:00Z",
  "status": ["clientDeleteProhibited", "clientTransferProhibited"],
  "nameServers": ["ns1.example.com", "ns2.example.com"],
  "updatedDate": "2022-08-14T04:00:00Z",
  "whoisServer": "whois.example-registrar.com",
  "domainAge": 28
}
```

## âš™ï¸ é…ç½®è¯´æ˜

### ğŸ” ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `WHOISXML_API_KEY` | WhoisXML APIå¯†é’¥ | `your_api_key` |
| `WHOISFREAKS_API_KEY` | WhoisFreaks APIå¯†é’¥ | `your_api_key` |
| `REDIS_URL` | Redisè¿æ¥URL | `redis://:password@localhost:6379/0` |
| `PORT` | æœåŠ¡ç›‘å¬ç«¯å£ | `3900` |
| `GIN_MODE` | Ginè¿è¡Œæ¨¡å¼ | `release` |

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š

- ğŸ‘¨â€ğŸ’» é¡¹ç›®ç»´æŠ¤è€…ï¼š[AsisYu](https://github.com/AsisYu)
- ğŸ“¦ é¡¹ç›®ä»“åº“ï¼š[GitHub](https://github.com/AsisYu/whosee-whois)